## Все команды взаимодействия с сервером RoboCup 2D

### Команды управления игроком

#### Подключение и отключение

| Команда | Формат | Описание | Пример |
|---------|--------|----------|--------|
| **init** | `(init <TeamName> [(version <Version>)] [(goalie)])` | Подключение игрока к серверу | `(init MyTeam (version 7))` |
| **bye** | `(bye)` | Отключение от сервера | `(bye)` |

**Ответ сервера на init:**
```
(init <side> <unum> <play_mode>)
```
- `side`: `l` (левая) или `r` (правая)
- `unum`: номер игрока (1-11)
- `play_mode`: режим игры (например, `before_kick_off`)

#### Команды перемещения (только 1 команда за такт!)

| Команда | Формат | Описание | Ограничения |
|---------|--------|----------|-------------|
| **move** | `(move <x> <y>)` | Перемещение игрока (только до игры или после гола) | x: -54..54, y: -32..32 |
| **dash** | `(dash <power>)` | Рывок/ускорение в направлении тела | power: -100..100 |
| **turn** | `(turn <moment>)` | Поворот тела | moment: -180..180° |
| **kick** | `(kick <power> <direction>)` | Удар по мячу | power: -100..100, direction: -180..180° |
| **catch** | `(catch <direction>)` | Ловля мяча (только вратарь) | direction: -180..180°, расстояние < 2 |

**Важно**: За один такт может быть выполнена **только одна** из этих пяти команд!

#### Дополнительные команды

| Команда | Формат | Описание | Ограничения |
|---------|--------|----------|-------------|
| **turn_neck** | `(turn_neck <angle>)` | Поворот головы независимо от тела | angle: -90..90° |
| **say** | `(say <message>)` | Отправка аудиосообщения | радиус 50, латиница и спецсимволы |
| **change_view** | `(change_view <width> <quality>)` | Изменение качества обзора | width: narrow/normal/wide, quality: low/high |
| **pointto** | `(pointto <x> <y>)` | Указать направление | - |
| **attentionto** | `(attentionto <side> <unum>)` | Следить за конкретным игроком | - |

### Сообщения от сервера (входящие)

#### Сенсорная информация

| Сообщение | Формат | Описание |
|-----------|--------|----------|
| **sense_body** | `(sense_body <time> <view_mode> <stamina> <speed> <head_angle> <kick_count> ...)` | Информация о состоянии тела игрока |

**Пример sense_body:**
```
(sense_body 4 (view_mode high normal) (stamina 8000 1) (speed 0.02 -34) (head_angle 0) (kick 0) (dash 1) (turn 3) (say 0) (turn_neck 0) (catch 0) (move 1) (change_view 0))
```

#### Визуальная информация

| Сообщение | Формат | Описание |
|-----------|--------|----------|
| **see** | `(see <time> <objInfo>+)` | Информация о видимых объектах |

**Форматы objInfo:**
```
(objName <distance> <direction>)                    # минимальная информация
(objName <distance> <direction> <distChange>)       # с изменением расстояния
(objName <distance> <direction> <distChange> <dirChange>)  # полная информация
(objName <distance> <direction> <distChange> <dirChange> <bodyDir> <headDir>)  # для игроков
```

**Типы объектов:**
- `(p "TeamName" [номер] [goalie])` - игрок
- `(b)` - мяч
- `(g [l|r])` - ворота
- `(f c)` - центральный флаг
- `(f [l|r] [t|b])` - флаги на линиях
- `(f [l|r] [t|b] [10|20|30|40|50])` - флаги на боковых линиях
- `(l [l|r|t|b])` - линии
- `(B)` - флаг (общее обозначение)

**Пример see:**
```
(see 6 ((f c) 28.5 -13 -0.57 -0.2) ((f r b) 90.9 -8) ((g r) 79 -29) ((b) 30 -13 -0.6 -0.2))
```

#### Аудиоинформация

| Сообщение | Формат | Описание |
|-----------|--------|----------|
| **hear** | `(hear <time> <sender> <message>)` | Аудиосообщение |

**Типы отправителей:**
- `referee` - судья
- `self` - сам игрок
- `online_coach_left` / `online_coach_right` - тренеры
- `coach` - тренер
- `<direction>` - направление источника звука (-180..180°)

**Примеры hear:**
```
(hear 0 referee kick_off_l)
(hear 15 self "kick")
(hear 1345 referee play_on)
(hear 1345 referee drop_ball)
```

### Команды для тренера (coach)

| Команда | Описание |
|---------|----------|
| `(init (version 7))` | Подключение тренера |
| `(team_graphic <x> <y>)` | Отправка графики |
| `(change_mode <play_mode>)` | Смена режима игры |
| `(move <player> <x> <y>)` | Перемещение игрока |
| `(recover)` | Восстановление энергии игроков |

### Режимы игры (play modes)

```
before_kick_off      # до начала
kick_off_l/r         # начальный удар
play_on              # игра
kick_in_l/r          # вбрасывание из аута
free_kick_l/r        # штрафной удар
corner_kick_l/r      # угловой удар
goal_kick_l/r        # удар от ворот
offside_l/r          # офсайд
game_over            # конец игры
goal_l/r             # гол
drop_ball            # спорный мяч
```


### Важные ограничения

1. **Частота тактов**: 10 раз в секунду
2. **Размер сообщения**: не более 4096 байт
3. **Одна команда за такт**: только одна из (move, dash, turn, kick, catch)
4. **Задержка**: команда применяется в следующем такте
5. **Шум**: координаты и расстояния искажаются сервером
6. **Радиус обзора**: зависит от режима просмотра
7. **Аудиосообщения**: радиус 50, нет гарантии доставки

### Коды ошибок

Сервер может отвечать ошибками:
- `(error unknown_command)` - неизвестная команда
- `(error illegal_command)` - недопустимая команда
- `(error illegal_object)` - недопустимый объект
- `(error illegal_parameter)` - недопустимый параметр